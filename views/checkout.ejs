<!DOCTYPE html>
<html lang="en">


<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->

<head>
  <meta charset="utf-8">
  <title>Electro⚡ | Checkout</title>
  <!-- SEO Meta Tags-->
  <meta name="description" content="Electro">
  <meta name="keywords"
    content="bootstrap, shop, e-commerce, market, modern, responsive,  business, mobile, bootstrap, html5, css3, js, gallery, slider, touch, creative, clean">
  <meta name="author" content="Createx Studio">
  <!-- Viewport-->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Favicon and Touch Icons-->
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="manifest" href="site.webmanifest">
  <link rel="mask-icon" color="#fe6a6a" href="safari-pinned-tab.svg">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">
  <!-- Vendor Styles including: Font Icons, Plugins, etc.-->
  <link rel="stylesheet" media="screen" href="vendor/simplebar/dist/simplebar.min.css" />
  <link rel="stylesheet" media="screen" href="vendor/tiny-slider/dist/tiny-slider.css" />
  <!-- Main Theme Styles + Bootstrap-->
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <link rel="stylesheet" media="screen" href="/css/theme.min.css">
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"> </script>
  <!-- Google Tag Manager-->
  <script>
    (function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          '../www.googletagmanager.com/gtm5445.html?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-WKV3GT5');
  </script>
</head>
<!-- Body-->

<body class="handheld-toolbar-enabled">
  <!-- Google Tag Manager (noscript)-->
  <noscript>
    <iframe src="http://www.googletagmanager.com/ns.html?id=GTM-WKV3GT5" height="0" width="0"
      style="display: none; visibility: hidden;"></iframe>
  </noscript>
  <!-- Sign in / sign up modal-->
  
  <main class="page-wrapper">
    <!-- Navbar 3 Level (Light)-->
    <form class="needs-validation modal fade" method="post" id="add-address" action="/add-address" tabindex="-1"
      novalidate>
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Add a new address</h5>
            <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          
          <div class="modal-body">
            <div class="row gx-4 gy-3">
              <div class="col-sm-6">
                <label class="form-label" for="address-fn">Name</label>
                <input class="form-control" name="name" type="text" id="address-fn" required>
                <div class="invalid-feedback">Please fill in you name!</div>
              </div>
              <div class="col-sm-6">
                <label class="form-label" for="address-ln">Mobile Number</label>
                <input class="form-control" type="tel" name="mobile" id="address-ln" required>
                <div class="invalid-feedback">Please fill in you last name!</div>
              </div>
              <div class="col-sm-12">
                <label class="form-label" for="address-line1">Your Address (house name, street etc.)</label>
                <input class="form-control" name="fullAddress" type="text" id="address-line1" required>
                <div class="invalid-feedback">Please fill in your address!</div>
              </div>

              <div class="col-sm-6">
                <label class="form-label" for="address-country">State</label>
                <select class="form-select" name="state" id="address-country" required>
                  <option value>Select State</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Tamil">Tamil Nadu</option>
                  <option value="Kashmir">Kashmir</option>
                  <option value="Telengana">Telengana</option>

                </select>

              </div>
              <div class="col-sm-6">
                <label class="form-label" for="address-city">District</label>
                <input class="form-control" name="district" type="text" id="address-city" required>
                <div class="invalid-feedback">Please fill in your District</div>
              </div>
              <div class="col-sm-6">
                <label class="form-label" for="address-line1">Landmark</label>
                <input class="form-control" name="landmark" type="text" id="address-line1" required>
                <div class="invalid-feedback">Please fill in your address!</div>
              </div>


              <div class="col-sm-6">
                <label class="form-label" for="address-zip">Pincode</label>
                <input class="form-control" type="tel" name="pincode" id="address-zip" required>
                <div class="invalid-feedback">Please add your ZIP code!</div>
              </div>

            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-bs-dismiss="modal">Close</button>
            <button class="btn btn-primary btn-shadow" type="submit">Add address</button>
          </div>
        </div>
      </div>
    </form>
    <header class="shadow-sm">
      <!-- Topbar-->

      <!-- Remove "navbar-sticky" class to make navigation bar scrollable with the page.-->
      <div class="navbar-sticky bg-light">
        <div class="navbar navbar-expand-lg navbar-light">
          <div class="container"><a class="navbar-brand d-none d-sm-block flex-shrink-0" href="/home"><img
                src="/img/electro-logo.png" width="142" alt="/img/electro-logo.png"></a><a
              class="navbar-brand d-sm-none flex-shrink-0 me-2" href="/home"><img src="/img/electro-logo.png" width="74"
                Electro></a>

            <div class="navbar-toolbar d-flex flex-shrink-0 align-items-center">
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarCollapse"><span class="navbar-toggler-icon"></span></button><a
                class="navbar-tool navbar-stuck-toggler" href="#"><span class="navbar-tool-tooltip">Expand menu</span>
                <div class="navbar-tool-icon-box"><i class="navbar-tool-icon ci-menu"></i></div>
              </a>

              <form action="/productlist" method="get">
                <div class="input-group d-none d-lg-flex flex-nowrap mx-4"><i
                    class="ci-search position-absolute top-50 start-0 translate-middle-y ms-3"></i>

                  <input name="search" class="form-control rounded-start w-100" type="text"
                    placeholder="Search for products">
              </form>


              <select onchange="categoryFilter(this.value)" class="form-select flex-shrink-0" style="width: 10.5rem;">
                <option>Select Categories</option>
                <% categoryData.forEach(element=> { %>
                  <option value="<%= element._id %>">
                    <%= element.name %>
                  </option>
                  <% }); %>
              </select>
            </div>

          </div>
          <a class="navbar-tool d-none d-lg-flex" href="/wishlist"><span class="navbar-tool-tooltip">Wishlist</span>
            <div class="navbar-tool-icon-box"><i class="navbar-tool-icon ci-heart"></i></div>
          </a>
          </a>

          </a>

            <a class=" bg-faded-dark rounded-3 navbar-tool px-4 d-none d-lg-flex" href="/userProfile"><span
                class="navbar-tool-tooltip">Profile</span><span class="">
                <%= user.name %>
              </span>
              <div class="navbar-tool-icon-box">
                <i class="navbar-tool-icon ci-user "></i>

              </div>
            </a>

            <% if (user.cart.items.length===0) {%>
              <div class="navbar-tool  ms-3"><a class="navbar-tool-icon-box bg-secondary " href="/cartmanage"><span
                    class="navbar-tool-label" id="cartLength">

                    0
                  </span><i class="navbar-tool-icon ci-cart"></i></a><a class="navbar-tool-text"
                  href="/cartmanage"><small>My
                    Cart</small> <span id="totalPrice"> ₹0</span> </a>
                <!-- Cart dropdown-->

              </div>
              <% } else {%>
                <div class="navbar-tool  ms-3"><a class="navbar-tool-icon-box bg-secondary " href="/cartmanage"><span
                      class="navbar-tool-label" id="cartLength">

                      <%= user.cart.items.length %>
                    </span><i class="navbar-tool-icon ci-cart"></i></a><a class="navbar-tool-text"
                    href="/cartmanage"><small>My
                      Cart</small> <span id="totalPrice"> ₹<%= user.cart.totalPrice %></span> </a>
                  <!-- Cart dropdown-->

                </div>
                <%} %>

                


        </div>
      </div>
      </div>
      <div class="navbar navbar-expand-lg navbar-light navbar-stuck-menu mt-n2 pt-0 pb-2">
        <div class="container">
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <!-- Search-->

            <!-- Departments menu-->

            <!-- Primary menu-->
            <ul class="navbar-nav">
              <li class="nav-item active"><a class="nav-link" href="/home">Home</a>

              </li>
              <li class="nav-item "><a class="nav-link " href="/productlist">Shop</a>
                ,
              </li>
              <li class="nav-item dropdown"><a class="nav-link " href="/userProfile"
                  data-bs-auto-close="outside">Account</a>

              </li>
              <li class="nav-item dropdown"><a class="nav-link " href="/wishlist"
                  data-bs-auto-close="outside">Wishlist</a>

              </li>

            </ul>
          </div>
        </div>
      </div>
      </div>
    </header>
    <!-- Page Title-->
    <div class="page-title-overlap bg-dark pt-4">
      <div class="container d-lg-flex justify-content-between py-2 py-lg-3">
        <div class="order-lg-2 mb-3 mb-lg-0 pt-lg-2">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb breadcrumb-light flex-lg-nowrap justify-content-center justify-content-lg-start">
              <li class="breadcrumb-item"><a class="text-nowrap" href="/home"><i class="ci-home"></i>Home</a></li>
              <li class="breadcrumb-item text-nowrap"><a href="shop-grid-ls.html">Shop</a>
              </li>
              <li class="breadcrumb-item text-nowrap active" aria-current="page">Checkout</li>
            </ol>
          </nav>
        </div>
        <div class="order-lg-1 pe-lg-4 text-center text-lg-start">
          <h1 class="h3 text-light mb-0">Checkout  - Address &amp; Payment</h1>
        </div>
      </div>
    </div>
    <div class="container pb-5 mb-2 mb-md-4">
      <div class="row">
        <section class="col-lg-8">
          <!-- Steps-->
          <div class="steps steps-light pt-2 pb-3 mb-5"><a class="step-item active" href="/cartmanage">
              <div class="step-progress"><span class="step-count">1</span></div>
              <div class="step-label"><i class="ci-cart"></i>Cart</div>
            </a><a class="step-item active current" href="/checkout">
              <div class="step-progress"><span class="step-count">2</span></div>
              <div class="step-label"><i class="ci-user-circle"></i>Checkout</div>
            </a></div>
          <!-- Autor info-->

          <!-- Shipping address--> 
<form id="newOrderForm">
  <input type="text" hidden name="couponAmount" id="couponAmount" value="0">
          <input type="text" hidden name="couponRedeme" id="couponRedeme" value="">
          <h2 class="h6 pb-3 mb-2">Choose shipping Address</h2>
          <div class="table-responsive">
            <table class="table table-hover fs-sm newwidth ">
              <thead style="border-collapse: collapse;">
                <tr>
                  <th hidden class="align-middle"></th>
                  <th hidden class="align-middle">Address</th>


                </tr>
              </thead>
              <tbody>
                <% address.forEach(adrs=> {%>
                  <% adrs.add.forEach(addr=> {%>


                    <tr>
                      <td style="border: none; " class="adrs-border-ri">
                        <div class="form-check mb-4">
                          <input class="form-check-input" type="radio" id="courier" value="<%= addr %>" name="address" required>
                          <label class="form-check-label" for="courier"></label>
                        </div>
                      </td>
                      <td class="adrs-border-lef align-middle" style="border: none; Padding-right: 10em;"><span
                          class="text-dark fw-medium">
                          <%= addr.name %>
                        </span><br><span class="text-muted">
                          <%= addr.fullAddress %>,<br> near <%= addr.landmark %>, <br>
                              <%= addr.district %>, <%= addr.state %>, <br> Pincode: <%= addr.pincode %>
                        </span></td>


                    </tr>
                    <% }); %>
                      <% }); %>


              </tbody>
            </table>
          </div>
          <div class="text-sm-start  pb-5"><a class="btn btn-primary" href="#add-address" data-bs-toggle="modal">Add new
              address</a></div>
          <h2 class="h6 pb-3 mb-2">Choose Payement Method</h2>
          <div class="table-responsive">
            <table class="table table-hover fs-sm newwidth">
              <thead style="border-collapse: collapse;">
                <tr>
                  <th hidden class="align-middle"></th>
                  <th hidden class="align-middle">Address</th>


                </tr>
              </thead>
              <tbody>



                <tr>
                  <td style="border: none; " class="adrs-border-ri">
                    <div class="form-check mb-4">
                      <input class="form-check-input" type="radio" id="paymentMethod" name="paymentMethod" value="cod" required>
                      <label class="form-check-label" for="paymentMethod"></label>
                    </div>
                  </td>
                  <td class="adrs-border-lef align-middle" style="border: none; padding-right: 10em;"><span
                      class="text-dark fw-medium">Cash On Delivery
                    </span><br><span class="text-muted">
                      Free cash on delivery
                    </span></td>


                </tr>
                <tr>
                  <td style="border: none;" class="adrs-border-ri">
                    <div class="form-check mb-4">
                      <input class="form-check-input" type="radio" id="payement" value="online" name="paymentMethod" required>
                      <label class="form-check-label" for="payement"></label>
                    </div>
                  </td>
                  <td class="adrs-border-lef align-middle" style="border: none; padding-right: 10em;"><span
                      class="text-dark fw-medium">Online Payement
                    </span><br><span class="text-muted"> UPI, Net Banking, etc...

                    </span></td>


                </tr>



              </tbody>
            </table>
          </div>
       

          <!-- Navigation (desktop)-->
         
          <div class="d-none d-lg-flex pt-4 mt-3">
            <div class="w-50 pe-3"><button class="btn btn-secondary d-block w-100" href="/cartmanage"><i
                  class="ci-arrow-left mt-sm-0 me-1"></i><span class="d-none d-sm-inline">Back to Cart</span><span
                  class="d-inline d-sm-none">Back</span></button></div>
                  <% if (address.length == 0) { %>
                  
                    <div class="w-50 ps-2"><button disabled type="submit" class="btn btn-primary d-block w-100" value='submit' ><span
                      class="d-none d-sm-inline">Confirm Order </span><span class="d-inline d-sm-none">Next</span><i
                      class="ci-check-circle mt-sm-0 ms-1"></i></button><label class="form-label mb-3 mt-4" ><span
                        class="badge bg-info fs-xs me-2">Note</span><span class="fw-medium">Can't proceed without address❗</span></label></div>
                      <%} else {%>
                        <div class="w-50 ps-2"><button type="submit" class="btn btn-primary d-block w-100" value='submit' ><span
                          class="d-none d-sm-inline">Confirm Order </span><span class="d-inline d-sm-none">Next</span><i
                          class="ci-check-circle mt-sm-0 ms-1"></i></button></div>
                          
                          <%} %> 
            
          </div>
        </form>
        </section>
        <!-- Sidebar-->
        <aside class="col-lg-4 pt-4 pt-lg-0 ps-xl-5">
          <div class="bg-white rounded-3 shadow-lg p-4 ms-lg-auto">
            <div class="py-2 px-xl-2">
              <div class="widget mb-3">
                <h2 class="widget-title text-center">Order summary</h2>
                <% user.cart.items.forEach(items=> {%>
                  <div class="d-flex align-items-center pb-2 border-bottom"><a class="d-block flex-shrink-0"
                      href="/productdetail?id=<%= items.product._id%>"><img src="<%= items.product.image[1]%>"
                        class="rounded" width="64" alt="Product"></a>

                    <div class="ps-2">
                      <h6 class="widget-product-title"><a href="/productdetail?id=<%= items.product._id%>">
                          <%= items.product.name %>
                        </a></h6>
                      <div class="widget-product-meta"><span class="text-accent me-2">₹ <%= items.product.discount %>
                        </span><span class="text-muted">x <%= items.qty %> </span></div>
                    </div>

                  </div>
                  <% }); %>
              </div>
              <div class="accordion" id="order-options">
                <div class="accordion-item">
                  <h3 class="accordion-header"><a class="accordion-button" href="#promo-code" role="button"
                      data-bs-toggle="collapse" aria-expanded="true" aria-controls="promo-code">Apply promo code</a>
                  </h3>
                  <div class="accordion-collapse collapse show" id="promo-code" data-bs-parent="#order-options">
                    <form class="accordion-body needs-validation"  id="applyCoupon">
                      <div class="mb-3">
                        <input class="form-control" type="text"  placeholder="Enter your Coupon Code" name="promo" >
                        <input type="text" hidden name="cartAmount" value="<%= user.cart.totalPrice %>">
                        <div class="invalid-feedback">Please provide promo code.</div>
                      </div>
                      <button id="couponButton" class="btn btn-outline-primary d-block w-100" type="submit"><span id="buttonText">Apply promo code</span></button>
                    </form>
                  </div>
                </div>
                
              </div>
              <br>
              <ul class="list-unstyled fs-sm pb-2 border-bottom">
                <li class="d-flex justify-content-between align-items-center"><span class="me-2">Subtotal:</span><span
                  class="text-end">₹ <%= user.cart.totalPrice %> </span></li>
                  <li class="d-flex justify-content-between align-items-center"><span class="me-2">Discount:</span><span
                      class="text-end" id="couponDiscount"></span></li>
                    

              </ul>
              <h3 class="fw-normal text-center my-4"><span id="totalPrice">₹<%= user.cart.totalPrice %></span></h3>

            </div>
          </div>
        </aside>
      </div>
      <!-- Navigation (mobile)-->
      <div class="row d-lg-none">
        <div class="col-lg-8">
          <div class="d-flex pt-4 mt-3">
            <div class="w-50 pe-3"><a class="btn btn-secondary d-block w-100" href="/cartmanage"><i
                  class="ci-arrow-left mt-sm-0 me-1"></i><span class="d-none d-sm-inline">Back to Cart</span><span
                  class="d-inline d-sm-none">Back</span></a></div>
            <div class="w-50 ps-2"><a class="btn btn-primary d-block w-100" href="checkout-shipping.html"><span
                  class="d-none d-sm-inline">Confirm Order</span><span class="d-inline d-sm-none">Next</span><i
                  class="ci-arrow-right-circle mt-sm-0 ms-1"></i></a></div>
          </div>
        </div>
      </div>
    </div>
  </main>
  <!-- Footer-->

  
    
  <footer class="footer bg-dark ">

<div class="pt-5 bg-darker">
  <div class="container">
    <div class="row pb-3">
      <div class="col-md-12 col-sm-12 mb-4">
        <div class="d-flex justify-content-center"><i class="ci-lightning text-primary" style="font-size: 2.25rem;"></i>
          <div class="ps-3">
            <h6 class="fs-base text-light mb-1">Electro by <span class="text-primary">  <a href="https://github.com/ahmadsalahuddeen">@salahCodes</a> </span> </h6>
           <h6 class="mb-0 fs-ms font-monospace text-white opacity-50">
    This project is built with the primary objective of practicing and learning backend development in my journey to become a full-stack developer. I have worked with technologies such as Node.js, Express, MongoDB, MVC pattern, and RestAPI, among others. It's important to note that approximately 65% of the user interface (HTML, CSS, and Bootstrap) was obtained from a template. You can visit my <a href="https://github.com/ahmadsalahuddeen"><span class="text-success text-opacity-100">GitHub</span></a> to explore my other projects.
</h6>
          </div>
        </div>
      </div>
      
    <hr class="hr-light mb-5">
    <div class="row pb-2">
      <div class="col-md-6 text-center text-md-start mb-4">
        <div class="text-nowrap rounded p-3 bg-white mb-4"><a class="d-inline-block align-middle mt-n1 me-3" href="#"><img class="d-block"
              src="/img/electro-logo.png" width="117" Electro></a>
         
        </div>
        
      </div>
      <div class="col-md-6 text-center text-md-end mb-4">
        <div class="mb-3"><a class="btn-social bs-light bs-twitter ms-2 mb-2" href="https://twitter.com/salahuddeen6017"><i
              class="ci-twitter"></i></a>
              <a class="btn-social bs-light bs-instagram ms-2 mb-2" href="https://www.instagram.com/salahcodes/"><i
              class="ci-instagram"></i></a>
              <a class="btn-social bs-light bs-instagram ms-2 mb-2" href="https://github.com/ahmadsalahuddeen"><i
              ><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
              </svg></i></a>
              <a class="btn-social bs-light bs-youtube ms-2 mb-2" href="https://www.youtube.com/channel/UCOyK9QcS9N_Fn_2OVbuH7qQ"><i
              class="ci-youtube"></i></a></div>
             </div>
      </div>
    </div>
    <div class="pb-4 fs-xs text-light opacity-50 text-center text-md-start">© openSourced by <a
        class="text-light" href="https://github.com/ahmadsalahuddeen" target="_blank" rel="noopener">ahmad salahuddeen (salahCodes)</a></div>
  </div>
</div>
</footer>
<!-- Toolbar for handheld devices (Default)-->
<div class="handheld-toolbar">
  <div class="d-table table-layout-fixed w-100"><a class="d-table-cell handheld-toolbar-item"
      href="/wishlist"><span class="handheld-toolbar-icon"><i class="ci-heart"></i></span><span
        class="handheld-toolbar-label">Wishlist</span></a>
        <a class="d-table-cell handheld-toolbar-item"
      href="javascript:void(0)" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
      onclick="window.scrollTo(0, 0)"><span class="handheld-toolbar-icon"><i class="ci-menu"></i></span><span
        class="handheld-toolbar-label">Menu</span></a>
        <a class="d-table-cell handheld-toolbar-item"
      href="/cartmanage"><span class="handheld-toolbar-icon"><i class="ci-cart"></i><span
          class="badge bg-primary rounded-pill ms-1">4</span></span><span
        class="handheld-toolbar-label"></span></a></div>
</div>
  <!-- Back To Top Button--><a class="btn-scroll-top" href="#top" data-scroll><span
      class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span><i class="btn-scroll-top-icon ci-arrow-up">
    </i></a>
  <!-- Vendor scrits: js libraries and plugins-->
  <script src="vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="vendor/simplebar/dist/simplebar.min.js"></script>
  <script src="vendor/tiny-slider/dist/min/tiny-slider.js"></script>
  <script src="vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
  <!-- Main theme script-->
  <script src="js/theme.min.js"></script>
 
  <script>
const  toastMixin = Swal.mixin({
    toast: true,
    icon: 'success',
    title: 'General Title',
    animation: false,
    position: 'top-right',
    showConfirmButton: false,
    timer: 1750,
    timerProgressBar: true,
    didOpen: (toast) => {
      toast.addEventListener('mouseenter', Swal.stopTimer)
      toast.addEventListener('mouseleave', Swal.resumeTimer)
    }
  });



$('#applyCoupon').submit((e)=>{
  e.preventDefault()
  $.ajax({
    url: '/applyCoupon',
    method: 'post',
    data: $('#applyCoupon').serialize(),
    success: (res)=>{
      console.log(res);
if (res.couponAvailable) {
$('#couponRedeme').val(res.couponName)
$('#couponAmount').val(res.couponAmount)
$('#couponDiscount').html(`${res.couponAmount}`)
let tPrice = <%= user.cart.totalPrice%> - res.couponAmount

$('#totalPrice').html(`₹ ${tPrice}`)
document.getElementById("couponButton").disabled = true;
$('#buttonText').html("Coupon Applied")
toastMixin.fire({
          title: "Coupon Applied Successfully",
          icon: 'success',
    iconColor:'#fff',
    color:'#fff',
    
          background: '#228B22',
        })
  
}else{

  toastMixin.fire({
    title: `${res.errorMessage}`,
    icon: 'warning',
    iconColor:'#fff',
    color:'#fff',
    background: '#cc3300',
  });
}
    }
  })
})

$('#newOrderForm').submit((e )=>{
  e.preventDefault()
  $.ajax({
    url: '/newOrder',
    method: 'post',
    data: $('#newOrderForm').serialize(),
    success: (res)=>{
      console.log("response: ", res);
      if (res.codDelivery) {
        location.href = '/ordersuccess'
      } else {
        razorpayPayement(res)
      }
    }
  })
})

function razorpayPayement(res){
  var options = {
      "key": "rzp_test_9WGL800ffhbOhn", // Enter the Key ID generated from the Dashboard
      "amount": res.orderData.totalPrice * 100, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
      "currency": "INR",
      "name": "Swalah codes corporation",
      "description": "Test Transaction",
      "image": "https://example.com/your_logo",
      "order_id": res.order.id, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
      "handler": function (response){
  
        paymentVerification(response, res.order, res.orderData)
        location.href = '/ordersuccess'
        
    },
      "prefill": {
          "name": res.user.name,
          "email": res.user.email,
          "contact": res.user.mobile
      },
     
      "theme": { 
          "color": "#3399cc"
      }
  };

  var rzp1 = new Razorpay(options);
  rzp1.open();
  
  rzp1.on('payment.failed', function (response){
    location.href = '/orderFailed'
   
})
  // e.preventDefault();
  // document.getElementById('rzp-button1').onclick = function(e){
  // }

}

function paymentVerification(response, order, orderData){
  $.ajax({
    url: '/verifyPayement',
    method: 'post',
    data: {
      response, order, orderData
    },
    success: (response)=>{
     if (response.signatureIsValid === "true") {
      location.href = '/ordersuccess'
     } else {
      location.href = '/orderFailed'
     }
    }

  })
}
    </script>
</body>


</html>